
<!DOCTYPE html>
<html>
<head>
	<title>My Expense App</title>
	<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>
		<script
			defer
			src="https://use.fontawesome.com/releases/v5.7.2/js/all.js"
			integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP"
			crossorigin="anonymous"
		></script>

	
</head>
<body>
	<nav class="navbar navbar-dark bg-dark">
			<span class="navbar-brand mb-0 h1">Xpers</span>
			<span class="navbar-brand mb-0 h1" id="heading">0</span>
		</nav>
	


	<div class="container-fluid bg-light" style="min-height: 100vh">
			<div class="container">
				<form id="myForm">
				<div class="jumbotron mt-4">
					<div class="input-group mb-3">
						
							<input
							type="text"
							name="amt"
							id="num"
							class="form-control"
							placeholder="Amount spent"
							aria-label="Amount spent"
							aria-describedby="spent in rupee"
							onblur="return val()"
						/>
						<div class="input-group-append">
							<span class="input-group-text" id="spent in rupee">â‚¹</span>
						</div>
					</div>





					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text" id="spent at">@</span>
						</div>
						<input
							type="date"
							class="form-control"
							id=date1
							placeholder="date1"
							aria-label="date1"
							aria-describedby="date1"
							blur="return val2()"
						/>
						
					</div>









					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text" id="spent at">@</span>
						</div>
						<input
							type="text"
							class="form-control"
							id="desc"
							placeholder="spent On"
							aria-label="spent On"
							aria-describedby="spent at"
							onblur="return val2()"
						/>
						<div class="input-group-append">
							<button class="btn btn-outline-primary" onclick="return val()" type="button"  id="butid">Add</button>
						</div>
					</div>
				</div>
</form>
<div id="table1"></div>
	<script type="text/javascript">
		//creating counter
		
		const headEl=document.querySelector("#heading");
		const table=document.querySelector("#table1");
		let totalExpense=0;
		headEl.textContent = totalExpense;
		//array for desc
		const allExpense=[];

		//function of adding
		function addExpense(){
			console.clear();
			
			const inputelement=document.querySelector("#num");
			//value of input 
			const inputval= inputelement.value;
			const amount=parseInt(inputval);
			const descl=document.querySelector("#desc");
			//value of input 
			const descp= descl.value;

			const date1=document.querySelector("#date1");
			var dat=date1.value.toString();


			console.log(dat);

			
			

			//object creation
			const  obj={};
			obj.amount=amount;
			obj.desc=descp;
		
			obj.moment=new Date();
			
			obj.mon=new Date(dat);
			console.log(obj);
			
			console.log(obj.mon);
			
			allExpense.push(obj);

			console.table(allExpense)
			//console.log({expense})
			totalExpense=totalExpense+amount;
			//console.log({totalExpense})
			headEl.textContent = "TOTAL: "+totalExpense;
				render(allExpense);
				
			var form = document.getElementById("myForm");
form.reset();
					}

					function render(newarr)
					{
						const allExpenseHtml= newarr.map(expense=>	 retExp(expense))
								const allExpenseStr = allExpenseHtml.join("");
							table.innerHTML=allExpenseStr;

					}
					function deletefunc(dateVal)
					{ 
						console.log(dateVal);
						for(let i=0;i<allExpense.length;i++)
						{
							if(allExpense[i].moment.valueOf()===dateVal)
							{	totalExpense=totalExpense-allExpense[i].amount;
								headEl.textContent = "TOTAL: "+totalExpense;
								let newarr=allExpense.splice(i,1);
								

							}
						}
						render(allExpense);
						console.log(totalExpense);
						
					}

					// function getDateString(moment)
					// {
					// 	return moment.toLocaleDateString('en-US', {year:'numeric', month:'long', day:'numeric'});
					// }

					function getString(moment)
					{
						return moment.toLocaleDateString('en-US', {year:'numeric', month:'long', day:'numeric'});
					}
					function retExp({amount,desc,moment,mon})
					{
						return `<div>
					<ul class="list-group" id="table1">
						<li class="list-group-item d-flex justify-content-between">
							<div class="d-flex flex-column"> 
								${desc}
								<small class="text-muted"> ${getString(mon)}</small>
							</div>
							<div>
								<span class="px-5">
									${amount}
								</span>
								<button type="button" class="btn btn-outline-danger btn-sm" onclick="deletefunc(${moment.valueOf()})">
									<i class="fas fa-trash-alt"></i>
								</button>
							</div>
						</li>
							`					

					}
		//readng the element
		const element = document.querySelector("#butid");
		//listening to the event
		element.addEventListener("click",addExpense,false);
		function val()
		{
			const no = document.querySelector("#num");
			const nom = no.value;
			const nomb=parseInt("nom");
			if(nom==null||nom==''||nom==' ')
			{

				alert("enter valid amount");
			
				return false;
			}

			// if(isInteger(nomb))
			// {
			// 	alert("hie");
			// }
		}
function val2()
		{
			const descl=document.querySelector("#desc");
			// //value of input 
			// const descp= descl.value;
			// if(descp||descp==='')
			// {

			// 	alert("enter valid description");
			// }
			// // if(isInteger(nomb))
			// // {
			// // 	alert("hie");
			// // }
		}





	</script>
</body>
</html>